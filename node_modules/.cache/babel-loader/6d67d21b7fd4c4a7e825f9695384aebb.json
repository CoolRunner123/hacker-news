{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\jkath\\\\Documents\\\\GitHub\\\\hacker-news\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\jkath\\\\Documents\\\\GitHub\\\\hacker-news\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\jkath\\\\Documents\\\\GitHub\\\\hacker-news\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\jkath\\\\Documents\\\\GitHub\\\\hacker-news\\\\src\\\\components\\\\News.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Stories from \"./layouts/Stories\";\nimport Loader from \"./layouts/Loader\";\n\nvar News = function News(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var _useState3 = useState(21),\n      _useState4 = _slicedToArray(_useState3, 2),\n      count = _useState4[0],\n      setCount = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isLoading = _useState6[0],\n      setLoading = _useState6[1]; //a global index to keep track of the all showed items\n  //setting different api params for different routes\n\n\n  var checkRoute = function checkRoute() {\n    var route;\n\n    switch (props.location.pathname) {\n      case \"/\":\n        route = \"/topstories\";\n        break;\n\n      case \"/shows\":\n        route = \"/showstories\";\n        break;\n\n      case \"/ask\":\n        route = \"/askstories\";\n        break;\n\n      case \"/jobs\":\n        route = \"/jobstories\";\n        break;\n\n      case \"/top\":\n        route = \"/topstories\";\n        break;\n\n      case \"/top\":\n        route = \"/topstories\";\n        break;\n\n      case \"/new\":\n        route = \"/newstories\";\n        break;\n\n      case \"/best\":\n        route = \"/beststories\";\n        break;\n\n      case \"/past\":\n        route = \"/past\";\n        break;\n\n      default:\n        route = \"/notFound\";\n        break;\n    }\n\n    return route;\n  };\n\n  var formatComponent = function formatComponent(item, callback) {\n    setState(item);\n    callback();\n  };\n\n  useEffect(function () {\n    // function executes here ,calling two async function\n    getData(checkRoute(), 0, 20).then(function (arr) {\n      getDeatils(arr).then(function (item) {\n        return formatComponent(item, function () {\n          props.hideLoader();\n        });\n      });\n    });\n  }, []); //getting all the data ids and storing them in an array\n\n  var getData =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(category, start, end) {\n      var arr, _ref2, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              arr = [];\n              _context.prev = 1;\n              _context.next = 4;\n              return axios.get(\"https://hacker-news.firebaseio.com/v0\".concat(category, \".json?print=pretty\"));\n\n            case 4:\n              _ref2 = _context.sent;\n              data = _ref2.data;\n              data.slice(start, end).map(function (item) {\n                return arr.push(item);\n              });\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](1);\n              return _context.abrupt(\"return\", _context.t0);\n\n            case 12:\n              return _context.abrupt(\"return\", arr);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 9]]);\n    }));\n\n    return function getData(_x, _x2, _x3) {\n      return _ref.apply(this, arguments);\n    };\n  }(); //fetching data from those ids and storing only the necessary datas in an array\n\n\n  var getDeatils =\n  /*#__PURE__*/\n  function () {\n    var _ref3 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3(arr) {\n      var promises, results;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              promises = arr.map(\n              /*#__PURE__*/\n              function () {\n                var _ref4 = _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee2(item) {\n                  var _ref5, data;\n\n                  return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          _context2.next = 2;\n                          return axios.get(\"https://hacker-news.firebaseio.com/v0/item/\".concat(item, \".json?print=pretty\"));\n\n                        case 2:\n                          _ref5 = _context2.sent;\n                          data = _ref5.data;\n                          return _context2.abrupt(\"return\", {\n                            item: item,\n                            author: data.by,\n                            title: data.title,\n                            score: data.score,\n                            comments_count: data.descendants,\n                            time: data.time,\n                            url: data.url != null ? data.url : \"https://news.ycombinator.com/item?id=\".concat(item)\n                          });\n\n                        case 5:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2);\n                }));\n\n                return function (_x5) {\n                  return _ref4.apply(this, arguments);\n                };\n              }());\n              _context3.next = 3;\n              return Promise.all(promises);\n\n            case 3:\n              results = _context3.sent;\n              return _context3.abrupt(\"return\", results);\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function getDeatils(_x4) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var showMoreContent = function showMoreContent() {\n    setLoading(true);\n    getData(checkRoute(), count, count + 20).then(function (arr) {\n      getDeatils(arr).then(function (item) {\n        return formatComponent(item, function () {\n          setCount(count + 20);\n          setLoading(false);\n          window.scrollTo(0, 0);\n        });\n      });\n    });\n  }; //return statement\n\n\n  return React.createElement(React.Fragment, null, props.isLoading ? React.createElement(Loader, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }) : React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: isLoading ? \"container-fluid main overlay\" : \"container-fluid main\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, React.createElement(\"table\", {\n    className: \"table\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, React.createElement(Stories, {\n    state: state,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  })))), React.createElement(\"div\", {\n    className: \"text-center m-1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"more-btn \",\n    onClick: showMoreContent,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, \"More\"))));\n};\n\nexport default withRouter(News);","map":{"version":3,"sources":["C:\\Users\\jkath\\Documents\\GitHub\\hacker-news\\src\\components\\News.js"],"names":["React","useEffect","useState","withRouter","axios","Stories","Loader","News","props","state","setState","count","setCount","isLoading","setLoading","checkRoute","route","location","pathname","formatComponent","item","callback","getData","then","arr","getDeatils","hideLoader","category","start","end","get","data","slice","map","push","promises","author","by","title","score","comments_count","descendants","time","url","Promise","all","results","showMoreContent","window","scrollTo"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport Stories from \"./layouts/Stories\";\r\nimport Loader from \"./layouts/Loader\";\r\n\r\nconst News = props => {\r\n  const [state, setState] = useState([]);\r\n  const [count, setCount] = useState(21);\r\n  const [isLoading, setLoading] = useState(false);\r\n\r\n  //a global index to keep track of the all showed items\r\n\r\n  //setting different api params for different routes\r\n  const checkRoute = () => {\r\n    let route;\r\n    switch (props.location.pathname) {\r\n      case \"/\":\r\n        route = \"/topstories\";\r\n        break;\r\n\r\n      case \"/shows\":\r\n        route = \"/showstories\";\r\n        break;\r\n\r\n      case \"/ask\":\r\n        route = \"/askstories\";\r\n        break;\r\n\r\n      case \"/jobs\":\r\n        route = \"/jobstories\";\r\n        break;\r\n\r\n      case \"/top\":\r\n        route = \"/topstories\";\r\n        break;\r\n        case \"/top\":\r\n          route = \"/topstories\";\r\n          break;\r\n\r\n      case \"/new\":\r\n        route = \"/newstories\";\r\n        break;\r\n\r\n      case \"/best\":\r\n        route = \"/beststories\";\r\n        break;\r\n      case \"/past\":\r\n          route = \"/past\";\r\n          break;\r\n\r\n      default:\r\n        route = \"/notFound\";\r\n        break;\r\n    }\r\n    return route;\r\n  };\r\n  const formatComponent = (item, callback) => {\r\n    setState(item);\r\n    callback();\r\n  };\r\n  useEffect(() => {\r\n    // function executes here ,calling two async function\r\n    getData(checkRoute(), 0, 20).then(arr => {\r\n      getDeatils(arr).then(item =>\r\n        formatComponent(item, () => {\r\n          props.hideLoader();\r\n        })\r\n      );\r\n    });\r\n  }, []);\r\n\r\n  //getting all the data ids and storing them in an array\r\n  const getData = async function(category, start, end) {\r\n    const arr = [];\r\n    try {\r\n      const { data } = await axios.get(\r\n        `https://hacker-news.firebaseio.com/v0${category}.json?print=pretty`\r\n      );\r\n      data.slice(start, end).map(item => arr.push(item));\r\n    } catch (error) {\r\n      return error;\r\n    }\r\n    return arr;\r\n  };\r\n\r\n  //fetching data from those ids and storing only the necessary datas in an array\r\n  const getDeatils = async function(arr) {\r\n    const promises = arr.map(async item => {\r\n      const { data } = await axios.get(\r\n        `https://hacker-news.firebaseio.com/v0/item/${item}.json?print=pretty`\r\n      );\r\n      return {\r\n        item,\r\n        author: data.by,\r\n        title: data.title,\r\n        score: data.score,\r\n        comments_count: data.descendants,\r\n        time: data.time,\r\n        url:\r\n          data.url != null\r\n            ? data.url\r\n            : `https://news.ycombinator.com/item?id=${item}`\r\n      };\r\n    });\r\n    const results = await Promise.all(promises);\r\n    return results;\r\n  };\r\n\r\n  const showMoreContent = () => {\r\n    setLoading(true);\r\n    getData(checkRoute(), count, count + 20).then(arr => {\r\n      getDeatils(arr).then(item =>\r\n        formatComponent(item, () => {\r\n          setCount(count + 20);\r\n          setLoading(false);\r\n          window.scrollTo(0, 0);\r\n        })\r\n      );\r\n    });\r\n  };\r\n\r\n  //return statement\r\n  return (\r\n    <>\r\n      {props.isLoading ? (\r\n        <Loader />\r\n      ) : (\r\n        <>\r\n          <div\r\n            className={\r\n              isLoading\r\n                ? \"container-fluid main overlay\"\r\n                : \"container-fluid main\"\r\n            }\r\n          >\r\n            <table className=\"table\">\r\n              <tbody>\r\n                <Stories state={state} />\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <div className=\"text-center m-1\">\r\n            <span className=\"more-btn \" onClick={showMoreContent}>\r\n              More\r\n            </span>\r\n          </div>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default withRouter(News);\r\n"]},"metadata":{},"sourceType":"module"}